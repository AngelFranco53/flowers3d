/* ─── Base ─────────────────────────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
  width: 100%; height: 100%;
  overflow: hidden;
  font-family: 'Georgia', serif;
  background: #0d0520;
}

#canvas-container {
  position: fixed;
  inset: 0;
  z-index: 0;
}

/* ─── Título flotante ─────────────────────────────────────────────────────── */
#page-title {
  position: fixed;
  top: 2rem;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  color: #ffe0f5;
  font-size: clamp(1.2rem, 4vw, 2rem);
  letter-spacing: 0.15em;
  text-shadow: 0 0 18px #ff6bd0aa, 0 0 40px #c060ff88;
  pointer-events: none;
  white-space: nowrap;
  animation: titleGlow 3s ease-in-out infinite alternate;
}

@keyframes titleGlow {
  from { text-shadow: 0 0 12px #ff6bd088, 0 0 30px #c060ff55; }
  to   { text-shadow: 0 0 24px #ff6bd0cc, 0 0 60px #c060ffaa, 0 0 80px #ff3366aa; }
}

/* ─── Botón de carta ──────────────────────────────────────────────────────── */
#letter-btn {
  position: fixed;
  bottom: 2.2rem;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  cursor: pointer;
  border: none;
  outline: none;
  padding: 0.85rem 2.2rem;
  border-radius: 50px;
  font-size: 1.05rem;
  font-family: 'Georgia', serif;
  letter-spacing: 0.08em;
  color: #fff0fa;
  background: linear-gradient(135deg, #c0206a 0%, #8b1a8b 50%, #4b0082 100%);
  box-shadow:
    0 4px 20px #c0206a88,
    0 0 40px #8b1a8b44,
    inset 0 1px 0 #ff99cc44;
  transition: transform 0.25s, box-shadow 0.25s, filter 0.25s;
  animation: btnPulse 2.5s ease-in-out infinite;
}

#letter-btn:hover {
  transform: translateX(-50%) translateY(-3px) scale(1.05);
  box-shadow:
    0 8px 32px #e0308888,
    0 0 60px #c040cc66,
    inset 0 1px 0 #ffaadd66;
  filter: brightness(1.15);
  animation: none;
}

#letter-btn:active {
  transform: translateX(-50%) scale(0.97);
}

@keyframes btnPulse {
  0%, 100% { box-shadow: 0 4px 20px #c0206a88, 0 0 30px #8b1a8b33; }
  50%       { box-shadow: 0 4px 28px #e0308899, 0 0 55px #c060cc55; }
}

/* ─── Overlay ─────────────────────────────────────────────────────────────── */
#modal-overlay {
  position: fixed;
  inset: 0;
  z-index: 100;
  background: rgba(8, 2, 20, 0.75);
  backdrop-filter: blur(6px);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.4s ease;
}

#modal-overlay.active {
  opacity: 1;
  pointer-events: all;
}

/* ─── Card / Carta ────────────────────────────────────────────────────────── */
#letter-card {
  position: relative;
  width: min(520px, 90vw);
  padding: 2.8rem 2.6rem 2.4rem;
  border-radius: 20px;
  background: linear-gradient(145deg, #1e0535 0%, #16022b 60%, #0d021e 100%);
  border: 1px solid #c060ff44;
  box-shadow:
    0 0 0 1px #ff66aa22,
    0 20px 60px #00000099,
    0 0 80px #c060ff22,
    inset 0 1px 0 #ffffff0a;
  transform: scale(0.85) translateY(30px);
  transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.4s;
  opacity: 0;

  /* decorative petals / bokeh via radial gradients */
  overflow: hidden;
}

#modal-overlay.active #letter-card {
  transform: scale(1) translateY(0);
  opacity: 1;
}

/* decorative blobs inside the card */
#letter-card::before {
  content: '';
  position: absolute;
  top: -60px; left: -60px;
  width: 200px; height: 200px;
  border-radius: 50%;
  background: radial-gradient(circle, #c060ff22 0%, transparent 70%);
  pointer-events: none;
}
#letter-card::after {
  content: '';
  position: absolute;
  bottom: -40px; right: -40px;
  width: 180px; height: 180px;
  border-radius: 50%;
  background: radial-gradient(circle, #ff66aa22 0%, transparent 70%);
  pointer-events: none;
}

/* close button */
#close-btn {
  position: absolute;
  top: 1rem; right: 1.1rem;
  background: none;
  border: none;
  cursor: pointer;
  color: #cc88ff99;
  font-size: 1.5rem;
  line-height: 1;
  transition: color 0.2s, transform 0.2s;
}
#close-btn:hover { color: #ff88cc; transform: rotate(90deg) scale(1.2); }

/* flower emoji decoration */
.card-flowers {
  text-align: center;
  font-size: 1.8rem;
  letter-spacing: 0.4rem;
  margin-bottom: 1.2rem;
  filter: drop-shadow(0 0 8px #ff99cc88);
}

/* recipient */
#card-recipient {
  text-align: center;
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.22em;
  color: #cc88ff99;
  margin-bottom: 0.6rem;
}

/* title */
#card-title {
  text-align: center;
  font-size: clamp(1.1rem, 3vw, 1.5rem);
  color: #ffe0f5;
  text-shadow: 0 0 16px #ff88cc66;
  margin-bottom: 1.4rem;
}

/* divider */
.card-divider {
  width: 60px;
  height: 2px;
  margin: 0 auto 1.4rem;
  background: linear-gradient(90deg, transparent, #c060ff, #ff66aa, transparent);
  border: none;
}

/* body text */
#card-body {
  color: #ddb8f0cc;
  font-size: 0.97rem;
  line-height: 1.85;
  white-space: pre-line;
  text-align: center;
}

/* sender */
#card-sender {
  margin-top: 1.6rem;
  text-align: right;
  font-style: italic;
  color: #ff99cc99;
  font-size: 0.9rem;
}

/* ─── Loader ─────────────────────────────────────────────────────────────── */
#loader {
  position: fixed;
  inset: 0;
  z-index: 200;
  background: #0d0520;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 1.2rem;
  transition: opacity 0.8s ease;
}
#loader.hidden { opacity: 0; pointer-events: none; }

.loader-petal {
  display: flex; gap: 10px;
}
.loader-petal span {
  display: block;
  width: 12px; height: 12px;
  border-radius: 50%;
  background: #ff6bd0;
  animation: loaderBounce 1.1s ease-in-out infinite;
  box-shadow: 0 0 10px #ff6bd088;
}
.loader-petal span:nth-child(2) { animation-delay: 0.15s; background: #c060ff; }
.loader-petal span:nth-child(3) { animation-delay: 0.30s; background: #ff3366; }
.loader-petal span:nth-child(4) { animation-delay: 0.45s; background: #ff6bd0; }

@keyframes loaderBounce {
  0%, 80%, 100% { transform: scale(0.7); opacity: 0.5; }
  40%           { transform: scale(1.3); opacity: 1; }
}

.loader-text {
  color: #cc88ffaa;
  font-size: 0.9rem;
  letter-spacing: 0.2em;
  text-transform: uppercase;
}

/* ─── Hint scroll / orbit ─────────────────────────────────────────────────── */
#orbit-hint {
  position: fixed;
  bottom: 5.5rem;
  left: 50%;
  transform: translateX(-50%);
  color: #9966bb66;
  font-size: 0.75rem;
  letter-spacing: 0.18em;
  pointer-events: none;
  white-space: nowrap;
  animation: fadeHint 5s ease 3s forwards;
  opacity: 0;
}
@keyframes fadeHint {
  0%   { opacity: 0; }
  15%  { opacity: 1; }
  80%  { opacity: 1; }
  100% { opacity: 0; }
}
